!function(){"use strict";class e{constructor(e,t){let{data:s,handleCardClick:r,handleDeleteClick:n,handleLikeClick:i,userId:o}=e;this._name=s.name,this._link=s.link,this._likes=s.likes||[],this._id=s._id,this._cardId=s._id,this._ownerId=s.owner?s.owner._id:null,this._userId=o,this._handleCardClick=r,this._handleDeleteClick=n,this._handleLikeClick=i,this._templateSelector=t}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}generateCard(){this._element=this._getTemplate(),this._setEventListeners();const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__title");return this._likeButton=this._element.querySelector(".card__like-button"),this._likeCount=this._element.querySelector(".card__like-count"),e&&(e.src=this._link,e.alt=this._name),t&&(t.textContent=this._name),this._renderLikes(),this._element}_setEventListeners(){const e=this._element.querySelector(".card__image"),t=this._element.querySelector(".card__delete-button");this._likeButton=this._element.querySelector(".card__like-button"),e&&e.addEventListener("click",(()=>{this._handleCardClick(this._name,this._link)})),t&&t.addEventListener("click",(()=>{this._handleDeleteClick(this._id)})),this._likeButton&&this._likeButton.addEventListener("click",(()=>{this._handleLikeClick(this._id,!this.isLiked())}))}_renderLikes(){const e=this._element.querySelector(".card__like-count"),t=this._element.querySelector(".card__like-button");e&&(e.textContent=this._likes.length),t&&(this.isLiked()?t.classList.add("card__like-button_active"):t.classList.remove("card__like-button_active"))}isLiked(){return this._likes.some((e=>e._id===this._userId))}updateLikes(e){this._likes=e,this._renderLikes()}removeCard(){this._element&&(this._element.remove(),this._element=null)}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e,t){const s=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),s.textContent=t,s.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._buttonElement&&(this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1))}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}}class s{constructor(e,t){let{items:s,renderer:r}=e;this._items=Array.isArray(s)?s:[],this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{e&&"object"==typeof e?this._renderer(e):console.error("Invalid item in Section:",e)}))}addItem(e){e&&this._container.prepend(e)}}class r{constructor(e){this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}))}}class n extends r{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popup.querySelector(".modal__form"),this._inputs=this._form.querySelectorAll(".modal__input"),this._submitButton=this._form.querySelector(".modal__button"),this._submitButton.dataset.originalText=this._submitButton.textContent}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){super.close(),this._form.reset()}setInputValues(e){this._inputs.forEach((t=>{t.value=e[t.name]}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";e?(this._submitButton.textContent=t,this._submitButton.disabled=!0):(this._submitButton.textContent=this._submitButton.dataset.originalText,this._submitButton.disabled=!1)}}const i=new class extends r{constructor(e,t){super(e),this._handleConfirm=t,this._form=this._popup.querySelector(".modal__form")}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleConfirm(this._cardId)}))}open(e){this._cardId=e,super.open()}}("#delete-card-modal",(function(){const e=i._cardId;o.deleteCard(e).then((()=>{document.querySelector(`[data-card-id="${e}"]`).remove(),i.close()})).catch((e=>console.error(e)))})),o=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}setUserInfo(e){let{name:t,about:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}updateAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"5db111ac-010a-455f-8b65-a9484d0efcee","Content-Type":"application/json"}}),a=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:r}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s),this._avatarElement=document.querySelector(r),this._userId=null}getUserInfo(){return{name:this._nameElement.textContent,about:this._jobElement.textContent,avatar:this._avatarElement.src,_id:this._userId}}setUserInfo(e){let{name:t,about:s,avatar:r,_id:n}=e;t&&(this._nameElement.textContent=t),s&&(this._jobElement.textContent=s),r&&(this._avatarElement.src=r),n&&(this._userId=n)}getUserId(){return this._userId}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:".profile__image"}),l=new class extends r{constructor(e){super(e),this._image=this._popup.querySelector(".modal__image"),this._caption=this._popup.querySelector(".modal__caption")}open(e,t){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}("#image_modal"),d=new n("#profile__edit_modal",(function(e){d.renderLoading(!0),o.setUserInfo({name:e.name,about:e.about}).then((e=>{a.setUserInfo(e),d.close()})).catch((e=>console.error(e))).finally((()=>d.renderLoading(!1)))})),h=new n("#card__edit_modal",(function(e){h.renderLoading(!0),o.addCard({name:e.title,link:e.url}).then((e=>{const t=u(e);_.addItem(t),h.close()})).catch((e=>console.error(e))).finally((()=>h.renderLoading(!1)))})),c=new n("#avatar-edit-modal",(function(e){c.renderLoading(!0),o.updateAvatar(e.avatar).then((e=>{a.setUserInfo(e),c.close()})).catch((e=>console.error(e))).finally((()=>c.renderLoading(!1)))}));let _;function u(t){const s=new e({data:t,handleCardClick:(e,t)=>{l.open(e,t)},handleDeleteClick:e=>{i.open(e)},handleLikeClick:(e,t)=>{(t?o.removeLike.bind(o):o.addLike.bind(o))(e).then((e=>{s.updateLikes(e.likes)})).catch((e=>console.error(e)))},userId:a.getUserId()},"#card__template");return s.generateCard()}Promise.all([o.getUserInfo(),o.getInitialCards()]).then((e=>{let[t,r]=e;a.setUserInfo(t),_=new s({items:r,renderer:e=>{const t=u(e);_.addItem(t)}},".cards__list"),_.renderItems()})).catch((e=>console.error(e))),document.querySelector(".profile__edit-button").addEventListener("click",(()=>{const{name:e,about:t}=a.getUserInfo();d.setInputValues({name:e,about:t}),d.open()})),document.querySelector(".profile__add-button").addEventListener("click",(()=>{h.open()})),document.querySelector(".profile__image").addEventListener("click",(()=>{c.open()})),document.querySelector(".profile__image-container").addEventListener("click",(()=>{c.open()}));const m={};var p;p={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button_save",inactiveButtonClass:"modal__button_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(p.formSelector)).forEach((e=>{const s=new t(p,e),r=e.getAttribute("name");m[r]=s,s.enableValidation()})),l.setEventListeners(),d.setEventListeners(),h.setEventListeners(),c.setEventListeners(),i.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjLHdCQUF3QmUsaUJBQWlCLFNBQVMsS0FDdkVxSixFQUFhL0UsTUFBTSxJQUdyQnRGLFNBQVNDLGNBQWMsbUJBQW1CZSxpQkFBaUIsU0FBUyxLQUNsRTRKLEVBQWdCdEYsTUFBTSxJQUV4QnRGLFNBQ0dDLGNBQWMsNkJBQ2RlLGlCQUFpQixTQUFTLEtBQ3pCNEosRUFBZ0J0RixNQUFNLElBRTFCLE1BQU02RixFQUFpQixDQUFDLEVBRUVySixRS2hLTSxDQUM5QnNKLGFBQWMsZUFDZG5KLGNBQWUsZ0JBQ2ZFLHFCQUFzQixzQkFDdEJFLG9CQUFxQix5QkFDckJFLGdCQUFpQiwwQkFDakJFLFdBQVksd0JMMkpLRyxNQUFNQyxLQUFLN0MsU0FBUzhDLGlCQUFpQmhCLEVBQU9zSixlQUNwRHZILFNBQVM5QixJQUNoQixNQUFNc0osRUFBWSxJQUFJeEosRUFBY0MsRUFBUUMsR0FDdEN1SixFQUFXdkosRUFBWXdKLGFBQWEsUUFDMUNKLEVBQWVHLEdBQVlELEVBQzNCQSxFQUFVdkgsa0JBQWtCLElBT2hDZ0csRUFBV3BFLG9CQUNYdUUsRUFBaUJ2RSxvQkFDakIyRSxFQUFhM0Usb0JBQ2JrRixFQUFnQmxGLG9CQUNoQnVCLEVBQWdCdkIsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vQXJvdW5kIHRoZSBVUy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL0Fyb3VuZCB0aGUgVVMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9Bcm91bmQgdGhlIFVTLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2ssIHVzZXJJZCB9LFxuICAgIHRlbXBsYXRlU2VsZWN0b3JcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcyB8fCBbXTtcbiAgICB0aGlzLl9pZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyID8gZGF0YS5vd25lci5faWQgOiBudWxsO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgY29uc3QgY2FyZFRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fbGlrZUNvdW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtY291bnRcIik7XG5cbiAgICBpZiAoY2FyZEltYWdlKSB7XG4gICAgICBjYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIH1cbiAgICBpZiAoY2FyZFRpdGxlKSB7XG4gICAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIH1cblxuICAgIHRoaXMuX3JlbmRlckxpa2VzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcblxuICAgIGlmIChjYXJkSW1hZ2UpIHtcbiAgICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZGVsZXRlQnV0dG9uKSB7XG4gICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5faWQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xpa2VCdXR0b24pIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2lkLCAhdGhpcy5pc0xpa2VkKCkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgX3JlbmRlckxpa2VzKCkge1xuICAgIGNvbnN0IGxpa2VDb3VudEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1jb3VudFwiKTtcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuXG4gICAgaWYgKGxpa2VDb3VudEVsZW1lbnQpIHtcbiAgICAgIGxpa2VDb3VudEVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgaWYgKGxpa2VCdXR0b24pIHtcbiAgICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaXNMaWtlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XG4gIH1cblxuICB1cGRhdGVMaWtlcyhuZXdMaWtlcykge1xuICAgIHRoaXMuX2xpa2VzID0gbmV3TGlrZXM7XG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcbiAgfVxuXG4gIHJlbW92ZUNhcmQoKSB7XG4gICAgaWYgKHRoaXMuX2VsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9idXR0b25FbGVtZW50KSB7XG4gICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gQXJyYXkuaXNBcnJheShpdGVtcykgPyBpdGVtcyA6IFtdO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgaXRlbSBpbiBTZWN0aW9uOlwiLCBpdGVtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikgfHxcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGF0YXNldC5vcmlnaW5hbFRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b24uZGF0YXNldC5vcmlnaW5hbFRleHQ7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRpb25Db25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxuICBcIiNkZWxldGUtY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVEZWxldGVDYXJkXG4pO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI1ZGIxMTFhYy0wMTBhLTQ1NWYtOGI2NS1hOTQ4NGQwZWZjZWVcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxufSk7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZVNlbGVjdG9yID0gXCIjY2FyZF9fdGVtcGxhdGVcIjtcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjaW1hZ2VfbW9kYWxcIik7XG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGVfX2VkaXRfbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXRcbik7XG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjY2FyZF9fZWRpdF9tb2RhbFwiLFxuICBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdFxuKTtcbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNhdmF0YXItZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVBdmF0YXJGb3JtU3VibWl0XG4pO1xuXG5sZXQgY2FyZExpc3Q7XG5cbi8vIHByZXR0aWVyLWlnbm9yZVxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAge1xuICAgICAgZGF0YTogY2FyZERhdGEsXG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICAgIGltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVEZWxldGVDbGljazogKGNhcmRJZCkgPT4ge1xuICAgICAgICBkZWxldGVDYXJkUG9wdXAub3BlbihjYXJkSWQpO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZUxpa2VDbGljazogKGNhcmRJZCwgaXNMaWtlZCkgPT4ge1xuICAgICAgICBjb25zdCBsaWtlTWV0aG9kID0gaXNMaWtlZFxuICAgICAgICAgID8gYXBpLnJlbW92ZUxpa2UuYmluZChhcGkpXG4gICAgICAgICAgOiBhcGkuYWRkTGlrZS5iaW5kKGFwaSk7XG4gICAgICAgIGxpa2VNZXRob2QoY2FyZElkKVxuICAgICAgICAgIC50aGVuKCh1cGRhdGVkQ2FyZCkgPT4ge1xuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyh1cGRhdGVkQ2FyZC5saWtlcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcbiAgICAgIH0sXG4gICAgICB1c2VySWQ6IHVzZXJJbmZvLmdldFVzZXJJZCgpLFxuICAgIH0sXG4gICAgY2FyZFRlbXBsYXRlU2VsZWN0b3JcbiAgKTtcblxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn1cblxuLy8gcHJldHRpZXItaWdub3JlXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKCkge1xuICBjb25zdCBjYXJkSWQgPSBkZWxldGVDYXJkUG9wdXAuX2NhcmRJZDtcbiAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY2FyZC1pZD1cIiR7Y2FyZElkfVwiXWApO1xuICAgICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xufVxuLy8gcHJldHRpZXItaWdub3JlXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChmb3JtRGF0YSkge1xuICBlZGl0UHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5zZXRVc2VySW5mbyh7IG5hbWU6IGZvcm1EYXRhLm5hbWUsIGFib3V0OiBmb3JtRGF0YS5hYm91dCB9KVxuICAgIC50aGVuKCh1cGRhdGVkVXNlcikgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXBkYXRlZFVzZXIpO1xuICAgICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiBlZGl0UHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpKTtcbn1cbi8vIHByZXR0aWVyLWlnbm9yZVxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoZm9ybURhdGEpIHtcbiAgYWRkQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5hZGRDYXJkKHsgbmFtZTogZm9ybURhdGEudGl0bGUsIGxpbms6IGZvcm1EYXRhLnVybCB9KVxuICAgIC50aGVuKChuZXdDYXJkKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQobmV3Q2FyZCk7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiBhZGRDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xufVxuLy8gcHJldHRpZXItaWdub3JlXG5mdW5jdGlvbiBoYW5kbGVBdmF0YXJGb3JtU3VibWl0KGZvcm1EYXRhKSB7XG4gIGVkaXRBdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGkudXBkYXRlQXZhdGFyKGZvcm1EYXRhLmF2YXRhcilcbiAgICAudGhlbigodXBkYXRlZFVzZXIpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVwZGF0ZWRVc2VyKTtcbiAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiBlZGl0QXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSkpO1xufVxuLy8gSW5pdGlhbGl6ZSBhbGwgZGF0YVxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW3VzZXJEYXRhLCBpbml0aWFsQ2FyZHNdKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBcIi5jYXJkc19fbGlzdFwiXG4gICAgKTtcbiAgICBjYXJkTGlzdC5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTtcblxuLy8gcHJldHRpZXItaWdub3JlXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAuc2V0SW5wdXRWYWx1ZXMoeyBuYW1lLCBhYm91dCB9KTtcbiAgZWRpdFByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0QXZhdGFyUG9wdXAub3BlbigpO1xufSk7XG5kb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbWFnZS1jb250YWluZXJcIilcbiAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcbiAgfSk7XG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7XG5cbi8vIFNldCB1cCBwb3B1cHNcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5kZWxldGVDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUNvbmZpcm0pIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtID0gaGFuZGxlQ29uZmlybTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlQ29uZmlybSh0aGlzLl9jYXJkSWQpO1xuICAgIH0pO1xuICB9XG5cbiAgb3BlbihjYXJkSWQpIHtcbiAgICB0aGlzLl9jYXJkSWQgPSBjYXJkSWQ7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pLFxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHVwZGF0ZUF2YXRhcihhdmF0YXIpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJJZCA9IG51bGw7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMsXG4gICAgICBfaWQ6IHRoaXMuX3VzZXJJZFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIsIF9pZCB9KSB7XG4gICAgaWYgKG5hbWUpIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBpZiAoYWJvdXQpIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICBpZiAoYXZhdGFyKSB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGF2YXRhcjtcbiAgICBpZiAoX2lkKSB0aGlzLl91c2VySWQgPSBfaWQ7XG4gIH1cblxuICBnZXRVc2VySWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VzZXJJZDtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpO1xuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2NhcHRpb24nKTtcbiAgfVxuXG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvbl9zYXZlXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidXNlcklkIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX2lkIiwiX2NhcmRJZCIsIl9vd25lcklkIiwib3duZXIiLCJfdXNlcklkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfZWxlbWVudCIsIl9zZXRFdmVudExpc3RlbmVycyIsImNhcmRJbWFnZSIsImNhcmRUaXRsZSIsIl9saWtlQnV0dG9uIiwiX2xpa2VDb3VudCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiX3JlbmRlckxpa2VzIiwiZGVsZXRlQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImlzTGlrZWQiLCJsaWtlQ291bnRFbGVtZW50IiwibGlrZUJ1dHRvbiIsImxlbmd0aCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNvbWUiLCJsaWtlIiwidXBkYXRlTGlrZXMiLCJuZXdMaWtlcyIsInJlbW92ZUNhcmQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVkIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJpc0FycmF5IiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImNvbnNvbGUiLCJlcnJvciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2lucHV0cyIsIl9zdWJtaXRCdXR0b24iLCJkYXRhc2V0Iiwib3JpZ2luYWxUZXh0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJzZXRJbnB1dFZhbHVlcyIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImRlbGV0ZUNhcmRQb3B1cCIsImhhbmRsZUNvbmZpcm0iLCJfaGFuZGxlQ29uZmlybSIsImNhcmRJZCIsImFwaSIsImRlbGV0ZUNhcmQiLCJ0aGVuIiwiY2F0Y2giLCJlcnIiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwiZ2V0SW5pdGlhbENhcmRzIiwic2V0VXNlckluZm8iLCJfcmVmMiIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRDYXJkIiwiX3JlZjMiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsInVwZGF0ZUF2YXRhciIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiZ2V0VXNlcklkIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl9jYXB0aW9uIiwiZWRpdFByb2ZpbGVQb3B1cCIsImZvcm1EYXRhIiwidXBkYXRlZFVzZXIiLCJmaW5hbGx5IiwiYWRkQ2FyZFBvcHVwIiwidGl0bGUiLCJ1cmwiLCJuZXdDYXJkIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiY2FyZExpc3QiLCJlZGl0QXZhdGFyUG9wdXAiLCJjYXJkRGF0YSIsImNhcmQiLCJ1cGRhdGVkQ2FyZCIsImFsbCIsInVzZXJEYXRhIiwiaW5pdGlhbENhcmRzIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtU2VsZWN0b3IiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=